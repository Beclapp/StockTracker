{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Bennett\\\\eclipse-workspace\\\\StockTracker\\\\server\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Bennett\\\\eclipse-workspace\\\\StockTracker\\\\server\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Bennett\\\\eclipse-workspace\\\\StockTracker\\\\server\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Bennett\\\\eclipse-workspace\\\\StockTracker\\\\server\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import StockItem from\"./StockItem\";var finnhub=require(\"finnhub\");var api_key=finnhub.ApiClient.instance.authentications[\"api_key\"];api_key.apiKey=\"bvue7g748v6pkq83cj3g\";var finnhubClient=new finnhub.DefaultApi();//Boolean on whether the current stock is displayed, enables portfolio info,\n//refresh button, and list to appear once at least a single stock is displayed.\nvar stockdisplayed=false;//The list that keeps track of all stock entries in the list.\nvar staticlist=[];//Sum of the total portfolio price\nvar sum=0;//Lets each stock item keep track of its place on the list.\nvar index=0;//Rounds Numbers up to two digits.\nfunction roundTwo(num){return Math.round(num*100)/100;}//Determines if the current price is higher than at the beginning of the day.\nfunction determinePrice(current,open){if(current>=open){return\"green\";}else{return\"red\";}}var StockList=/*#__PURE__*/function(_React$Component){_inherits(StockList,_React$Component);var _super=_createSuper(StockList);function StockList(props){var _this;_classCallCheck(this,StockList);_this=_super.call(this,props);_this.lookupSymbol=function(){//Prevents the screen from automatically refreshing.\n//I don't know exactly what it does but my program breaks without it.\n//event.preventDefault();\ntry{fetch(\"https://finnhub.io/api/v1/search?q=\"+_this.state.currDisplay+\"&token=\"+api_key.apiKey).then(function(data){return data.json();}).then(function(res){if(res.count===0){alert(\"Error: Stock not found\");_this.setState({currDisplay:\"\"});}else{_this.displayInfo(res.result[0].displaySymbol,res.result[0].description);}});}catch(err){alert(\"HTTP Error\");_this.setState({currDisplay:\"\"});}};_this.displayInfo=function(symbol,name){finnhubClient.quote(symbol,function(error,data,response){if(data===null){alert(\"Error finding stock\");_this.setState({currDisplay:\"\"});return;}stockdisplayed=true;sum+=data.c;staticlist.push({name:name,symbol:symbol,color:determinePrice(data.c,data.o),curr:data.c,shares:1});index++;_this.setState({currDisplay:\"\"});});};_this.handleChange=function(event){event.preventDefault();_this.setState({currDisplay:event.target.value});};_this.clearList=function(){//event.preventDefault();\nstaticlist=[];_this.setState({display:false});sum=0;stockdisplayed=false;};_this.addShare=function(name){var item=staticlist.find(function(share){return name===share.name;});sum+=item.curr;item.shares+=1;_this.setState({currDisplay:\"\"});};_this.removeShare=function(name){var item=staticlist.find(function(share){return name===share.name;});sum-=item.curr;item.shares-=1;_this.setState({currDisplay:\"\"});};_this.deleteShare=function(name){var item=staticlist.find(function(share){return name===share.name;});sum-=item.curr*item.shares;staticlist.splice(staticlist.indexOf(item),1);_this.setState({currDisplay:\"\"});};_this.refreshList=function(){sum=0;staticlist.forEach(function(item){finnhubClient.quote(item.symbol,function(error,data,response){if(data!==null){var newPrice=roundTwo(data.c);sum+=newPrice*item.shares;item.color=determinePrice(newPrice,data.o);item.curr=newPrice;_this.setState({currDisplay:\"\"});}});});};_this.state={currDisplay:\"\",stock:\"\",display:false};return _this;}//Retrieves the symbol from the api using a search function.\n_createClass(StockList,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Enter Stocks Below (Use Name):\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",value:this.state.currDisplay,onChange:this.handleChange,index:index})),/*#__PURE__*/React.createElement(\"button\",{onClick:this.lookupSymbol},\"Submit\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.clearList},\"Clear\")),/*#__PURE__*/React.createElement(\"p\",null,stockdisplayed&&\"Portfolio Value: $\"+roundTwo(sum)),/*#__PURE__*/React.createElement(\"ul\",null,staticlist.map(function(item){return/*#__PURE__*/React.createElement(StockItem,{data:item.name,color:item.color,currentPrice:item.curr,addShare:_this2.addShare,decreaseShare:_this2.removeShare,deleteShare:_this2.deleteShare});})),stockdisplayed&&/*#__PURE__*/React.createElement(\"button\",{onClick:this.refreshList},\"Refresh\"));}}]);return StockList;}(React.Component);export{StockList as default};","map":{"version":3,"sources":["C:/Users/Bennett/eclipse-workspace/StockTracker/server/client/src/StockList.js"],"names":["React","StockItem","finnhub","require","api_key","ApiClient","instance","authentications","apiKey","finnhubClient","DefaultApi","stockdisplayed","staticlist","sum","index","roundTwo","num","Math","round","determinePrice","current","open","StockList","props","lookupSymbol","fetch","state","currDisplay","then","data","json","res","count","alert","setState","displayInfo","result","displaySymbol","description","err","symbol","name","quote","error","response","c","push","color","o","curr","shares","handleChange","event","preventDefault","target","value","clearList","display","addShare","item","find","share","removeShare","deleteShare","splice","indexOf","refreshList","forEach","newPrice","stock","map","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport StockItem from \"./StockItem\";\r\n\r\nconst finnhub = require(\"finnhub\");\r\nconst api_key = finnhub.ApiClient.instance.authentications[\"api_key\"];\r\napi_key.apiKey = \"bvue7g748v6pkq83cj3g\";\r\nconst finnhubClient = new finnhub.DefaultApi();\r\n\r\n//Boolean on whether the current stock is displayed, enables portfolio info,\r\n//refresh button, and list to appear once at least a single stock is displayed.\r\nlet stockdisplayed = false;\r\n\r\n//The list that keeps track of all stock entries in the list.\r\nlet staticlist = [];\r\n\r\n//Sum of the total portfolio price\r\nlet sum = 0;\r\n\r\n//Lets each stock item keep track of its place on the list.\r\nlet index = 0;\r\n\r\n//Rounds Numbers up to two digits.\r\nfunction roundTwo(num) {\r\n  return Math.round(num * 100) / 100;\r\n}\r\n\r\n//Determines if the current price is higher than at the beginning of the day.\r\nfunction determinePrice(current, open) {\r\n  if (current >= open) {\r\n    return \"green\";\r\n  } else {\r\n    return \"red\";\r\n  }\r\n}\r\n\r\nexport default class StockList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currDisplay: \"\",\r\n      stock: \"\",\r\n      display: false\r\n    };\r\n  }\r\n  //Retrieves the symbol from the api using a search function.\r\n  lookupSymbol = () => {\r\n    //Prevents the screen from automatically refreshing.\r\n    //I don't know exactly what it does but my program breaks without it.\r\n    //event.preventDefault();\r\n    try {\r\n      fetch(\r\n        \"https://finnhub.io/api/v1/search?q=\" +\r\n          this.state.currDisplay +\r\n          \"&token=\" +\r\n          api_key.apiKey\r\n      )\r\n        .then((data) => data.json())\r\n        .then((res) => {\r\n          if (res.count === 0) {\r\n            alert(\"Error: Stock not found\");\r\n            this.setState({ currDisplay: \"\" });\r\n          } else {\r\n            this.displayInfo(\r\n              res.result[0].displaySymbol,\r\n              res.result[0].description\r\n            );\r\n          }\r\n        });\r\n    } catch (err) {\r\n      alert(\"HTTP Error\");\r\n      this.setState({ currDisplay: \"\" });\r\n    }\r\n  };\r\n\r\n  //Displays the Info using the symbol and the name, adds it to the list.\r\n  displayInfo = (symbol, name) => {\r\n    finnhubClient.quote(symbol, (error, data, response) => {\r\n      if (data === null) {\r\n        alert(\"Error finding stock\");\r\n        this.setState({ currDisplay: \"\" });\r\n        return;\r\n      }\r\n      stockdisplayed = true;\r\n      sum += data.c;\r\n      staticlist.push({\r\n        name: name,\r\n        symbol: symbol,\r\n        color: determinePrice(data.c, data.o),\r\n        curr: data.c,\r\n        shares: 1\r\n      });\r\n      index++;\r\n      this.setState({ currDisplay: \"\" });\r\n    });\r\n  };\r\n  //Updates the search box as the user types in a query.\r\n  handleChange = (event) => {\r\n\tevent.preventDefault();\r\n    this.setState({ currDisplay: event.target.value });\r\n  };\r\n\r\n  //Clears the list of all entries.\r\n  clearList = () => {\r\n    //event.preventDefault();\r\n    staticlist = [];\r\n    this.setState({ display: false });\r\n    sum = 0;\r\n    stockdisplayed = false;\r\n  };\r\n\r\n  //Adds a share to the list item.\r\n  addShare = (name) => {\r\n    let item = staticlist.find((share) => name === share.name);\r\n    sum += item.curr;\r\n    item.shares += 1;\r\n    this.setState({ currDisplay: \"\" });\r\n  };\r\n\r\n  //Removes a share from the list item.\r\n  removeShare = (name) => {\r\n    let item = staticlist.find((share) => name === share.name);\r\n    sum -= item.curr;\r\n    item.shares -= 1;\r\n    this.setState({ currDisplay: \"\" });\r\n  };\r\n\r\n  deleteShare = (name) => {\r\n    let item = staticlist.find((share) => name === share.name);\r\n    sum -= item.curr * item.shares;\r\n    staticlist.splice(staticlist.indexOf(item), 1);\r\n    this.setState({ currDisplay: \"\" });\r\n  };\r\n\r\n  //Updates every list item with the current price and color.\r\n  refreshList = () => {\r\n    sum = 0;\r\n    staticlist.forEach((item) => {\r\n      finnhubClient.quote(item.symbol, (error, data, response) => {\r\n        if (data !== null) {\r\n          let newPrice = roundTwo(data.c);\r\n          sum += newPrice * item.shares;\r\n          item.color = determinePrice(newPrice, data.o);\r\n          item.curr = newPrice;\r\n          this.setState({ currDisplay: \"\" });\r\n        }\r\n      });\r\n    });\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Enter Stocks Below (Use Name):</h2>\r\n        <form>\r\n          <label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={this.state.currDisplay}\r\n              onChange={this.handleChange}\r\n              index={index}\r\n            />\r\n          </label>\r\n          <button onClick={this.lookupSymbol}>Submit</button>\r\n          <button onClick={this.clearList}>Clear</button>\r\n        </form>\r\n        <p>{stockdisplayed && \"Portfolio Value: $\" + roundTwo(sum)}</p>\r\n        <ul>\r\n          {staticlist.map((item) => (\r\n            <StockItem\r\n              data={item.name}\r\n              color={item.color}\r\n              currentPrice={item.curr}\r\n              addShare={this.addShare}\r\n              decreaseShare={this.removeShare}\r\n              deleteShare={this.deleteShare}\r\n            />\r\n          ))}\r\n        </ul>\r\n        {stockdisplayed && <button onClick={this.refreshList}>Refresh</button>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}